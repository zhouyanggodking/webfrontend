<!DOCTYPE html>
<html lang="en">
    <head>
        <title>DOM</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- <link href="css/style.css" rel="stylesheet"> -->
    </head>
    <body>
        <script>
            var body = document.body;

            var div = document.createElement('div');

            var divAttr = document.createAttribute('style');
            divAttr.value = "background-color: yellow";
            div.setAttributeNode(divAttr);

            var p = document.createElement('p');
            p.innerText = 'This is a paragraph';

            var label = document.createElement('label');
            var input = document.createElement('input');

            label.setAttribute('for', 'inputId');
            label.innerText = 'For Input: ';
            input.id = 'inputId';
            input.type = 'text';

            var btn = document.createElement('button');
            btn.innerText = 'Add New Purple Div';

            btn.addEventListener('click', function(event){
                var div = document.createElement('div');
                div.setAttribute('style', 'height: 100px');
                div.style.backgroundColor = 'purple';

                var removeBtn = document.createElement('button');
                //removeBtn.innerText = 'Remove';
                var removeText = document.createTextNode('Remove');
                removeBtn.appendChild(removeText);
                removeBtn.addEventListener('click', function(event){
                    div.remove();
                });

                var changeColorBtn = document.createElement('button');
                changeColorBtn.innerText = 'change';

                changeColorBtn.addEventListener('click', function(event){
                    div.style.backgroundColor = 'pink';
                });

                var replaceBtn = document.createElement('button');
                replaceBtn.innerText = 'replace';

                replaceBtn.addEventListener('click', function(event){
                    var newDiv = document.createElement('div');
                    newDiv.style.height = '200px';
                    newDiv.style.backgroundColor = 'aqua';
                    div.parentElement.replaceChild(newDiv, div);
                });

                var removeParentBtn = document.createElement('button');
                removeParentBtn.innerText = 'unwrap';

                removeParentBtn.addEventListener('click', function(event){
                    console.log(this);
                    unwrap(this);
                });

                div.appendChild(removeBtn);
                div.appendChild(changeColorBtn);
                div.appendChild(replaceBtn);
                div.appendChild(removeParentBtn);
                body.appendChild(div);
            });

            div.appendChild(p);
            div.appendChild(label);
            div.appendChild(input);
            div.appendChild(btn);

            body.appendChild(div);

            //remove current element's parent and leaving its content there
            function unwrap(el){
                var grandParent = el.parentElement.parentElement;
                var parent = el.parentElement;

                if(!parent && !grandParent){
                    return false;
                }

                while(parent.firstChild){
                    grandParent.insertBefore(parent.firstChild, parent);
                }

                grandParent.removeChild(parent);
                return true;
            }

        </script>
    </body>
</html>