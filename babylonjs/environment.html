<!DOCTYPE html>
<html>
<head>
    <title>Environment</title>
    <style>
        html, body {
            overflow: hidden;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }

        #renderCanvas {
            width: 100%;
            height: 100%;
            touch-action: none;
        }
    </style>
</head>
<body>
    <canvas id="renderCanvas"></canvas>
    <script src="node_modules/babylonjs/babylon.js"></script>
    <script>
        var canvas = document.getElementById('renderCanvas');
        var engine = new BABYLON.Engine(canvas, true);//true for antialias

        var scene = createScene();

        //important: register a render loop
        engine.runRenderLoop(function () {
            //scene.activeCamera.alpha += 0.01;
            scene.render();
        });

        indow.addEventListener('resize', function () {
            engine.resize();
        });

        //scene configuration, sky material, fog
        //https://doc.babylonjs.com/extensions/Sky
        function createScene() {
            //create a scene
            var scene = new BABYLON.Scene(engine);
            //scene.clearColor = BABYLON.Color3.Yellow();
            //scene.clearColor = new BABYLON.Color3(0.5, 0.8, 0.5);
            //scene.ambientColor = new BABYLON.Color3(0.3, 0.3, 0.3);

            //configure fog
            scene.fogMode = BABYLON.Scene.FOGMODE_EXP;
            scene.fogColor = new BABYLON.Color3(0.9, 0.9, 0.85);
            scene.fogDensity = 0.1;

            var light = new BABYLON.PointLight("Omni", new BABYLON.Vector3(10, 50, 50), scene);

            var arcCamera = new BABYLON.ArcRotateCamera('arcCamera', 0, 0, 2, BABYLON.Vector3.Zero(), scene);
            arcCamera.setPosition(new BABYLON.Vector3(0, 5, -10));
            arcCamera.attachControl(canvas, false, false);//third param to forbid useCtrlForPanning

            // create a built-in "ground" shape; its constructor takes the same 5 params : name, width, height, subdivisions, scene, updatable
            //var ground = BABYLON.Mesh.CreateGround('ground', 50, 50, 1, scene);
            
            //var groundMaterial = new BABYLON.StandardMaterial('ground_material', scene);
            ////this won't take effect if there's no scene.ambientColor
            //groundMaterial.ambientColor = BABYLON.Color3.Blue();
            //groundMaterial.backFaceCulling = false;
            //ground.material = groundMaterial;

            // Skybox  TODO: apply texture
            //var skybox = BABYLON.Mesh.CreateBox("skyBox", 100.0, scene);
            //var skyboxMaterial = new BABYLON.StandardMaterial("skyBox", scene);
            //skyboxMaterial.backFaceCulling = false;
            //skyboxMaterial.reflectionTexture = new BABYLON.CubeTexture("skybox/skybox", scene);
            //skyboxMaterial.reflectionTexture.coordinatesMode = BABYLON.Texture.SKYBOX_MODE;
            //skyboxMaterial.diffuseColor = new BABYLON.Color3(0, 0, 0);
            //skyboxMaterial.specularColor = new BABYLON.Color3(0, 0, 0);
            //skyboxMaterial.disableLighting = true;
            //skybox.material = skyboxMaterial;
            //skybox.infiniteDistance = true;

            var boxMaterial = new BABYLON.StandardMaterial('box_material', scene);
            boxMaterial.diffuseColor = BABYLON.Color3.Yellow();

            for (var ii = 0; ii < 8; ++ii) {
                var box = BABYLON.Mesh.CreateBox('box' + ii, 1, scene);
                box.material = boxMaterial;
                //box.position.y = 3;
                box.position.z = ii * ii;
            }
            // return the created scene
            return scene;

        };
    </script>
</body>
</html>