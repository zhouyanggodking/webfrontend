<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>映射</title>
    <style>::-webkit-scrollbar{display:none;}html,body{overflow:hidden;}</style>
</head>
<body>
<div id="mountNode"></div>
<script>/*Fixing iframe window.innerHeight 0 issue in Safari*/document.body.clientHeight;</script>
<script src="https://gw.alipayobjects.com/os/antv/assets/g6/1.2.8/g6.min.js"></script>
<script src="https://gw.alipayobjects.com/os/antv/assets/lib/jquery-3.2.1.min.js"></script>
<script type="text/javascript">
const data = {
  "nodes": [
    {
      "x": 550,
      "y": 300,
      "type": "type2",
      "value": 20,
      "active": true,
      "id": "系统二"
    },
    {
      "x": 360,
      "y": 300,
      "type": "type1",
      "value": 30,
      "active": true,
      "id": "系统一"
    },
    {
      "x": 780,
      "y": 300,
      "type": "type3",
      "value": 15,
      "active": false,
      "id": "系统三"
    }
  ],
  "edges": [
    {
      "type": "type1",
      "source": "系统一",
      "id": "32cb9f22",
      "value": 30,
      "active": true,
      "target": "系统二"
    },
    {
      "type": "type2",
      "source": "系统二",
      "id": "795e94a7",
      "value": 20,
      "active": false,
      "target": "系统三"
    },
    {
      "type": "type3",
      "source": "系统三",
      "id": "55fe688d",
      "target": "系统一",
      "value": 5,
      "active": false,
      "controlPoints": [
        {
          "x": 780,
          "y": 269.5
        },
        {
          "x": 640,
          "y": 160
        },
        {
          "x": 420.5,
          "y": 239.5
        }
      ]
    }
  ]
};
const net = new G6.Net({
  fitView: 'autoZoom',
  id: 'mountNode',           // 容器ID
  height: window.innerHeight,        // 画布高
});
net.source(data.nodes, data.edges);
net.node()
  .label('id');

net.edge()
  .shape(obj=>{
    if(obj.type === 'type1') return 'line';
    if(obj.type === 'type2') return 'arrow';
    if(obj.type === 'type3') return 'smoothArrow';
  })
  // .label(obj=>{
  //   console.log(obj);
  //   return {
  //     text: obj.value,
  //     fill: 'green'
  //   };
  // });
  .label((edge) => {
    return {
      text: 'king',
      textBaseLine: 'top',
      x: 10,
      y: 10
    }
  })
net.render();
</script>
</body>
</html>
